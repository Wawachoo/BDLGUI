{% extends "base.html" %}

{% block header %}
  <h1>Add a repository</h1>
{% endblock %}

{% block content %}

  <div class="container-fluid">
    <div class="row">
      <br>
      <!-- Form to connect to a repository. -->
      <div class="col-md-4">
        <p class="lead">New repository properties</p>
        <form id="connectForm" method="get" action="/api/connect">
          <div class="form-group">
            <h5>Required properties</h5>
            <div class="input-group">
              <span class="input-group-addon" id="basic-addon1">URL</span>
              <input type="text" class="form-control" placeholder="The remote URL" aria-describedby="basic-addon1" name="url">
            </div>
            <br>
            <h5>Optional properties</h5>
            <div class="input-group">
              <span class="input-group-addon" id="basic-addon1">Name</span>
              <input type="text" class="form-control" placeholder="The local copy name" aria-describedby="basic-addon1" name="name">
            </div>
            <br>
            <div class="input-group">
              <span class="input-group-addon" id="basic-addon1">Template</span>
              <input type="text" class="form-control" placeholder="The files name template" aria-describedby="basic-addon1" name="template">
            </div>
            <br>
            <br>
          </div>
        </form>
        <button class="btn btn-default" onclick="$.getJSON('/api/connect', $('#connectForm').serialize());">Create repository</button>
      </div>
      <!-- Separator. -->
      <div class="col-md-2">
      </div>
      <!-- List of supported sites / available engines.
      This list is currently generated by flask, which is a bad idea. Next
      versions should a JS call to fetch the list of sites / engines.
      -->
      <div class="col-md-6">
        <p id="availbleEngines" class="lead">Supported sites</p>
        <div class="table-responsive">
          <table id="enginesList" class="table table-hover table-condensed">
            <!-- Table header. -->
            <tr>
              <th>Site</th>
              <th>Module</th>
            </tr>
            {% for site, module in engines %}
              <tr>
                <td>{{ site }}</td>
                <td>{{ module }}</td>
              </tr>
            {% endfor %}
          </table>
        </div>
      </div>

    </div>
  </div>


{% endblock %}

{% block scripts %}
  <!--script src="/static/js/repositories.js"></script-->
{% endblock %}
